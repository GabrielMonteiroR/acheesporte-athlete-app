<?xml version="1.0" encoding="utf-8" ?>
<ContentPage  
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"  
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"  
    xmlns:viewmodels="clr-namespace:acheesporte_athlete_app.ViewModels"  
    x:Class="acheesporte_athlete_app.Views.ReservationCreatePage"  
    x:DataType="viewmodels:ReservationCreateViewModel"  
    Title="Nova Reserva"  
    Shell.NavBarIsVisible="True"
    BackgroundColor="AliceBlue">

    <ScrollView>
        <VerticalStackLayout Padding="24" Spacing="20">

            <!-- Local -->
            <VerticalStackLayout Spacing="8">
                <Label Text="{Binding Venue.Name}" FontSize="20" FontAttributes="Bold" TextColor="#333333" />
                <Label Text="{Binding Venue.Address}" FontSize="16" TextColor="#666666" />
            </VerticalStackLayout>

            <!-- Horário -->
            <Label Text="Selecione um horário disponível:" FontSize="16" TextColor="#333333" />

            <Picker ItemsSource="{Binding Availabilities}"  
                    SelectedItem="{Binding SelectedAvailability}"  
                    ItemDisplayBinding="{Binding DisplayText}"  
                    Title="Horários"  
                    TextColor="#333333"  
                    BackgroundColor="#FFFFFF"   />

            <!-- Detalhes -->
            <Frame BackgroundColor="#FFFFFF" CornerRadius="16" Padding="16" HasShadow="True" IsVisible="{Binding SelectedAvailability}">
                <VerticalStackLayout Spacing="8">
                    <Label Text="{Binding SelectedAvailability.StartDate, StringFormat='Início: {0:dd/MM/yyyy HH:mm}'}"  
                           FontSize="14" TextColor="#333333" />
                    <Label Text="{Binding SelectedAvailability.EndDate, StringFormat='Término: {0:dd/MM/yyyy HH:mm}'}"  
                           FontSize="14" TextColor="#333333" />
                    <Label Text="{Binding SelectedAvailability.Price, StringFormat='Preço: R$ {0:F2}'}"  
                           FontSize="14" TextColor="#333333" />
                </VerticalStackLayout>
            </Frame>

            <!-- Pagamento -->
            <Label Text="Forma de pagamento:" FontSize="16" TextColor="#333333" />
            <Frame BackgroundColor="#FFFFFF" CornerRadius="16" Padding="16" HasShadow="True">
                <Label Text="Cartão de crédito" FontSize="16" FontAttributes="Bold" TextColor="black" />
            </Frame>

            <!-- Botão -->
            <Button Text="Confirmar Reserva"  
                    Command="{Binding SubmitCommand}"  
                    BackgroundColor="DeepPink"  
                    TextColor="White"  
                    CornerRadius="12"  
                    HeightRequest="48"  
                    FontAttributes="Bold"  
                    IsEnabled="{Binding SelectedAvailability}" />

            <ActivityIndicator IsRunning="{Binding IsSubmitting}"  
                               IsVisible="{Binding IsSubmitting}"  
                               Color="#200937"  
                               HeightRequest="32" />

            <Label Text="{Binding ErrorMessage}" TextColor="Red"  
                   FontSize="13"  
                   IsVisible="{Binding ErrorMessage, Converter={StaticResource NullToFalseConverter}}" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
